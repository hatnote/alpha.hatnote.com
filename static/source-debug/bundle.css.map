{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/Table.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import {querystring, push} from 'svelte-spa-router'\n  import {parse} from 'qs'\n  import Table from './Table.svelte'\n  import {get_template_keys,\n          get_citation,\n          get_template_map} from './utils.js'\n  import {supported_languages} from './languages.js'\n\n  let source = parse($querystring).source || ''\n  let language = parse($querystring).lang || 'en'\n  let template\n  let template_map\n  \n  $: template_map_promise = get_template_map(language).then(data => {\n    template_map = data\n    return data\n  })\n  $: source_promise = get_citation(source).then(data => {\n    if (data[0]) {\n      var item_type = data[0].itemType\n      template = template_map[item_type]\n    }\n    return data\n  })\n  $: template_promise = get_template_keys(language, 'Template:' + template)\n  $: push('/?lang=' + language + '&source=' + source)\n</script>\n\n<style>\n  :global(body) {\n    line-height: 1.5em;\n  }\n  :global(a, a:visited) {\n    color: #181b1f;\n    text-decoration: none;\n    background-image: linear-gradient(to bottom, #03a9f4 50%, #03a9f4 50%);\n    background-repeat: repeat-x;\n    background-size: 1px 2px;\n    background-position: 0 100%;\n    transition: color 1s ease;\n  }\n  :global(a:hover) {\n    text-decoration: none;\n    color: #03a9f4;\n    transition: color 1s ease;\n  }\n\n  input {\n    width: 100%;\n  }\n  label {\n    font-weight: bold\n  }\n  li {\n    margin-bottom: 0.2em;\n  }\n  h2 {\n    padding: 1em 0 0 0;\n    border-top: 7px solid #181b1f;\n  }\n\n  .body {\n    max-width: 600px;\n    margin: 5em auto;\n    border-radius: 5px;\n    border: 1px solid #c4cdd4;\n    padding: 1em;\n  }\n  .loading {\n    padding: 5em;\n    text-align: center;\n    border-top: 7px solid #181b1f;\n  }\n  .search {\n\n  }\n</style>\n\n<svelte:head>\n  <title>Wikipedia Source Debug Tool</title>\n  <meta name=\"description\" content=\"A validation tool for Wikipedia sources\" />\n</svelte:head>\n\n<div class=\"body\">\n  <div class=\"search\">\n    <h1>Wikipedia Source Debug Tool</h1>\n\n    <p>Use this debug tool to see what information <a href=\"https://www.mediawiki.org/wiki/Citoid\">Citoid</a> can detect when generating a Wikipedia citation. Provide your URL, DOI, ISBN, PMC/PMID, QID, title, or citation.</p>\n\n    <label>Source</label>\n    <input bind:value={source} >  \n    <label>Wikipedia Langauge:</label>\n    <select bind:value={language}>\n      {#each supported_languages as supported_language}\n      <option value=\"{supported_language.code}\">{supported_language.name}</option>\n      {/each}\n    </select>\n  </div>\n\n  {#await template_map_promise}\n  <p class=\"loading\">...loading template_map for {language}</p>\n  {:then d_template_map}\n    {#await source_promise}\n      <p class=\"loading\">...loading source data for {source}</p>\n    {:then data}\n      {#if source}\n        {#await template_promise}\n          <p class=\"loading\">\n            ...loading template data for {template}\n          </p>\n        {:then keys}\n          \n          <h2>Detected: {data[0].itemType} / Template:{template}</h2>\n\n          <h3>Available data</h3>\n          <Table data={data[0]} {keys}/>\n\n          <h3>Missing data</h3>\n          <p>Supporting more, relevant fields will produce better citations on Wikipedia. Fields supported by <a href=\"https://{language}.wikipedia.org/wiki/Template:{template}\">{template}</a> ({language}) and missing from this source:</p>\n          <ul>\n            {#each keys as key}\n              {#if data && !Object.keys(data[0]).includes(key)}\n                <li>{key}</li>\n              {/if}\n            {/each}\n          </ul>\n\n          <h2>How can I improve this source on Wikipedia?</h2>\n          <p>Did you notice something wrong? Are there relevant fields that aren't included?</p>\n          <ul>\n            <li>Make the source Zotero-compatible: <a href=\"https://www.zotero.org/support/dev/exposing_metadata\">learn more about adding or fixing Zotero metadata</a>.</li>\n            <li>Improve the Zotero translator for this source: <a href=\"https://github.com/wikimedia/mediawiki-services-zotero-translators\">see the source code for Wikipedia's Zotero service</a>, and see Wikimedia's <a href=\"https://www.mediawiki.org/wiki/Citoid/Creating_Zotero_translators\">guide for creating Zotero translators</a>.</li>\n          </ul>\n          <!--\n          <h2>Dumps!!</h2>\n          <h3>Template Map</h3>\n          {JSON.stringify(d_template_map)}\n          <h3>Source data</h3>\n          {JSON.stringify(data)}\n          <h3>Template keys</h3>\n          {JSON.stringify(keys)}\n          -->\n        {:catch error}\n          {error}\n        {/await}\n      {/if}\n    {:catch error}\n      {error}\n    {/await}\n  {:catch error}\n    {error}\n  {/await}\n\n  <h2>About</h2>\n  <p>The source code is <a href=\"https://github.com/hatnote/source-debug\">available on github</a>. This tool was built by <a href=\"https://github.com/slaporte\">Stephen LaPorte</a> at <a href=\"https://wikiconference.org/wiki/2019/Main_Page\">WikiConference North America 2019</a>. Thanks to <a href=\"https://twitter.com/fuzheado\">@fuzheado</a> for the idea.</p>\n</div>",
    "<script>\n  export let data\n  export let keys\n  \n  let entries = Object.entries(data)\n</script>\n\n<style>\n  table {\n    border-collapse: collapse;\n  }\n  table, th, td {\n    border: 1px solid #a0b4cb;\n    padding: 0.75em;\n  }\n  th {\n    color: #666;\n    background: #edf7ff;\n  }\n</style>\n\n<table>\n  {#each entries as entry}\n    {#if !keys || keys.includes(entry[0])}\n      <tr>\n        {#if keys}\n          <th>{entry[0]}</th>\n        {/if}\n        {#if typeof(entry[1]) == 'object'}\n          <td><svelte:self data={entry[1]}/></td>\n        {:else}\n          <td>{entry[1]}</td>\n        {/if}       \n      </tr>\n    {/if}\n  {/each}\n</table>\n"
  ],
  "names": [],
  "mappings": "AA8BU,IAAI,AAAE,CAAC,AACb,WAAW,CAAE,KAAK,AACpB,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,IAAI,CACrB,gBAAgB,CAAE,gBAAgB,EAAE,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CACtE,iBAAiB,CAAE,QAAQ,CAC3B,eAAe,CAAE,GAAG,CAAC,GAAG,CACxB,mBAAmB,CAAE,CAAC,CAAC,IAAI,CAC3B,UAAU,CAAE,KAAK,CAAC,EAAE,CAAC,IAAI,AAC3B,CAAC,AACO,OAAO,AAAE,CAAC,AAChB,eAAe,CAAE,IAAI,CACrB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,KAAK,CAAC,EAAE,CAAC,IAAI,AAC3B,CAAC,AAED,KAAK,cAAC,CAAC,AACL,KAAK,CAAE,IAAI,AACb,CAAC,AACD,KAAK,cAAC,CAAC,AACL,WAAW,CAAE,IAAI;EACnB,CAAC,AACD,EAAE,cAAC,CAAC,AACF,aAAa,CAAE,KAAK,AACtB,CAAC,AACD,EAAE,cAAC,CAAC,AACF,OAAO,CAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAClB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC/B,CAAC,AAED,KAAK,cAAC,CAAC,AACL,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,GAAG,CAAC,IAAI,CAChB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,OAAO,CAAE,GAAG,AACd,CAAC,AACD,QAAQ,cAAC,CAAC,AACR,OAAO,CAAE,GAAG,CACZ,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC/B,CAAC,AACD,OAAO,cAAC,CAAC,AAET,CAAC;ACpED,KAAK,cAAC,CAAC,AACL,eAAe,CAAE,QAAQ,AAC3B,CAAC,AACD,mBAAK,CAAE,gBAAE,CAAE,EAAE,cAAC,CAAC,AACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,OAAO,CAAE,MAAM,AACjB,CAAC,AACD,EAAE,cAAC,CAAC,AACF,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,OAAO,AACrB,CAAC"
}